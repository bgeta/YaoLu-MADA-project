---
title: "Covid-19 death and vaccination base on time series data"
subtitle: ""
author: Yao Lu
date: "`r Sys.Date()`"
format:
  docx:
    toc: false
    number-sections: true
    highlight-style: github
bibliography: ../dataanalysis_template_references.bib
csl: ../apa.csl
---



```{r, echo=FALSE, message=FALSE}
# load a few R packages
library(here)
library(knitr)
```



# Summary/Abstract
_Write a summary of your project._


Do regression for the relationship between the covid infection and vaccination. Maybe add some other variables like population, age, gender, race. Plan to use county as individual observation. 

{{< pagebreak >}}


# Introduction 

## General Background Information
_The main data we use is the vaccination data and the data of the COVID cases in Georgia. Then after we make a summary of the data. We try some models which could guide us to do further study.Our research question is, does the coverage of vaccine decrease the spread of COVID. Under the background of the pandemic, people generate the vaccine to prevent the spread of the COVID. How many effect do the vaccine have? Now, the method we use here is using crude model to briefly test the relationship between coverage of the vaccine and incerasing speed of the COVID. _ 

## Description of data and data source
_Firstly, we load data and see if there is the need of clean and transformation_

All data wrangling process are recorded in code/processing_code. 

covid vaccination data comes from
https://experience.arcgis.com/experience/3d8eea39f5c1443db1743a4cb8948a9c
covid symptom and death data comes from
https://ga-covid19.ondemand.sas.com/docs/ga_covid_data.zip

All the raw data are saved at raw_data


## Questions/Hypotheses to be addressed

Can booster decrease the speed of COVID spread?

# Methods 

Start from linear regression. Then may try CV/bootstraping.


## Data import and cleaning



## Statistical analysis



{{< pagebreak >}}


# Results

## Exploratory/Descriptive analysis


```{r, include=FALSE, cache=FALSE}
knitr::read_chunk(here("code","analysis_code","exploratory.R"))
```

Load the packages
```{r, packages, message = FALSE, warning = FALSE,echo=FALSE}
```

Load the data.
```{r,loaddata,echo=FALSE, message=FALSE}
```

### Data exploration through tables

Vaccine-related tables

```{r,table,echo=FALSE, message=FALSE}
```

### Data exploration through figures

Histogram plots for the continuous outcomes. 

'14 day case rate' first.

```{r,figurey,echo=FALSE, message=FALSE}
```

Here we find there are two county which have high '14 day case rate'. We want to know which they are.

```{r,figurey1,echo=FALSE, message=FALSE}
```

They are 'Quitman' and 'Stewart' counties. In the previous 14 days/100,000 population, Quitman has 392.33 cases reported, and Stewart has 1125.8 cases reported. Beyond our current research, we should pay attention about what situations make these two counties have such a high level than other counties. Previous 14 days before 01/31/2023.


Now population, RTCUMVAXADMIN,PCTCUMPVAX,PCTCUMPCVAX and PCTBOOSTER. Since last four should be highly correlated. The analysis we will apply later should be same. 
Our final model should include two predictors which are population and one of these four.

Since the four choices share same statistics steps. We just pick population+PCTBOOSTER as example. I was thinking where could I find a categorical variables. Such as could I make population as 'small','medium' and 'large'. I think we can try both way how we define population. Since there is not other good choice of categorical variable I can find in this dataset. To make the diversity of our predictors. I decide to define population as categorical variables.(However,I am not saying this a better way.)

Now 'PCTBOOSTER'.

```{r,figurex5,echo=FALSE, message=FALSE}
```

Now '14 day case rate' as function of 'PCTBOOSTER'.

```{r,function1,echo=FALSE, message=FALSE}
```

Here we find that two outliers make our plot hard to see clearly. We can try another model removing these two outliers. Here I just leave it here to see what our model shows.

Once more cases as function of PCTBOOSTER, stratified by population. 

```{r,function2,echo=FALSE, message=FALSE}
```


### Notes

Here we can see both the two outliers have small population.

## Basic statistical analysis

```{r, include=FALSE, cache=FALSE}
knitr::read_chunk(here("products","manuscript","Manuscript.R"))
```

Load the packages
```{r, packages, message = FALSE, warning = FALSE,echo=FALSE}
```

Load the data.
```{r,loaddata,echo=FALSE, message=FALSE}
```

Linear regression
```{r,lm,echo=FALSE, message=FALSE}
```

These are the result from simple linear regression.

However, we would like to do linear regression with one predictor each time to explore the most significant ones. Since we haven't find any significant even with the most possible significants ones.(fully vaccine and booster) So, we should expect we will have many diffculties. Here I will explore all variable in our data sets.

```{r,lm1,echo=FALSE, message=FALSE}
```

From one to one regression, only 'case rate' have a significant p-value. And all vaccine relevant predictors are irrelevant to "14 day case rate". From here, I will adjust my predictors from vaccine-related to "case rate".

And population1 is a categorical variable, so the single p-value is not enough to decide if should include it or not. So, we do anova F-test manually.

```{r,anova,echo=FALSE, message=FALSE}
```
Unfortunately, it is also insignificant. So, we should remove it in real data analysis. But here since I want to keep my predictors' diversity. So, I assume it is significant.

```{r,lm2,echo=FALSE, message=FALSE}
```
Surprisingly, when we adjusted 'case rate' in our model, categorical population shows a little bit significance. Here is our initial conclusion. Vaccine cannot decrease the speed of COVID confirmed cases in 14 days. Since not all people who get infected will have test, there is bias. Here are the possible guess I made. Worst one, vaccine cannot prevent COVID. Neutral one, vaccine can smooth the symptom, but cannot reduce infection. Optimistic one, vaccine can smooth the symptom, but virus shows immune escape. The county who had experienced a high rate infection still keep a high '14 day case rate', because the type of virus in that county escape the vaccine protection.

As the 'case rate' increase one unit, the '14 day case rate' will increase 0.008894 unit. That is, if cumulative number of cases per 100,000 population increase one. Cases reported in the previous 14 days per 100,000 population will increase 0.008894. (t-value=7.836,p-value<0.001).

And the county with less population have higher '14 day case rate'. The initial guess is that, for the county with high population, people have already had herd immunity at the early stage of COVID. So, in 01/31/2023, the county with less population have higher '14 day case rate'. 



## Full analysis



{{< pagebreak >}}


# Discussion

## Summary and Interpretation


## Strengths and Limitations


## Conclusions



{{< pagebreak >}}

# References



